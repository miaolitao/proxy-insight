<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ProxyInsight - 现代化网络流量监控工具</title>
    <link rel="stylesheet" href="/static/style.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body class="dark-mode">
    <div class="background-mesh"></div>
    <div class="app-container">
      <!-- 侧边栏 -->
      <aside class="sidebar" aria-label="侧边栏">
        <div class="logo-container">
          <div class="logo-icon"></div>
          <h1>ProxyInsight</h1>
        </div>
        <nav class="sidebar-nav">
          <a href="#" class="nav-item active">
            <span class="icon">🏠</span>
            首页
          </a>
          <a href="#" class="nav-item">
            <span class="icon">🔍</span>
            请求列表
          </a>
          <a
            href="/api/cert/download"
            class="nav-item"
            id="cert-link"
            download="mitmproxy-ca-cert.pem"
          >
            <span class="icon">🛡️</span>
            证书管理
          </a>
          <a href="#" class="nav-item">
            <span class="icon">⚙️</span>
            设置
          </a>
        </nav>
        <div class="sidebar-footer">
          <div class="profile">
            <div class="avatar">SD</div>
            <div class="user-info">
              <span class="name">管理员</span>
              <span class="status">在线</span>
            </div>
          </div>
        </div>
      </aside>

      <!-- 主内容区 -->
      <main class="main-content">
        <!-- 顶部控制栏 -->
        <header class="top-bar">
          <div class="search-container">
            <input
              type="text"
              placeholder="搜索请求、域名或关键词..."
              id="search-input"
            />
          </div>
          <div class="controls">
            <div class="proxy-status">
              <span class="status-text"
                >代理状态: <span id="status-label">已关闭</span></span
              >
              <label class="switch" for="proxy-toggle">
                <input
                  type="checkbox"
                  id="proxy-toggle"
                  aria-label="切换代理状态"
                />
                <span class="slider round"></span>
              </label>
            </div>
            <button class="icon-btn" title="清除全部" id="clear-btn">🧹</button>
            <div class="notification-wrapper">
              <button class="icon-btn" title="通知" id="bell-btn">
                🔔
                <span class="badge" id="notif-badge" style="display: none"
                  >0</span
                >
              </button>
              <div class="notif-dropdown" id="notif-dropdown">
                <div class="notif-header">
                  <span>通知中心</span>
                  <button id="mark-read-btn">全部标记为已读</button>
                </div>
                <div class="notif-list" id="notif-list">
                  <!-- Notifications injected by JS -->
                  <div class="notif-empty">暂无新消息</div>
                </div>
              </div>
            </div>
          </div>
        </header>

        <!-- 数据展示区 -->
        <div class="content-body" id="content-body">
          <!-- 仪表盘视图 -->
          <div id="dashboard-view" class="view-container">
            <!-- Dashboard content will be rendered here -->
          </div>

          <!-- 请求列表视图 -->
          <div
            id="request-list-view"
            class="view-container"
            style="display: none"
          >
            <div class="request-panel">
              <div class="panel-header">
                <div class="col method">方法</div>
                <div class="col status">状态</div>
                <div class="col url">请求地址 (URL)</div>
                <div class="col timestamp">创建时间</div>
                <div class="col time">耗时</div>
              </div>
              <div class="request-list" id="request-list">
                <!-- 这里的请求项由 JS 动态生成 -->
              </div>
            </div>

            <!-- 详情面板 -->
            <aside class="detail-panel" id="detail-panel" aria-label="请求详情">
              <div class="detail-tabs">
                <button class="tab-btn active">Header</button>
                <button class="tab-btn">Body</button>
                <button class="tab-btn">Cookie</button>
                <button class="tab-btn">Curl</button>
                <button class="tab-btn">Response</button>
                <button class="tab-btn">耗时</button>
              </div>
              <div class="detail-content">
                <!-- Data injected by JS -->
              </div>
            </aside>
          </div>

          <!-- 设置视图 -->
          <div id="settings-view" class="view-container" style="display: none">
            <!-- Settings content injected by UI.js -->
          </div>
        </div>
      </main>
    </div>
    <div id="toast-container" class="toast-container"></div>
    <script type="module" src="/static/js/app.js?v=20260121"></script>
  </body>
</html>
